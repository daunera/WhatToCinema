version: '3.8'

services:
  backend:
    build: ./backend
    container_name: mozi-backend
    restart: always
    environment:
      - API_KEY=${API_KEY}
      - MOVIE_THEATER_URLS=${MOVIE_THEATER_URLS}
      - SKIP_MOVIE_KEYWORDS=${SKIP_MOVIE_KEYWORDS}
    volumes:
      - data:/app/data
    networks:
      - dokploy-network

  frontend:
    build: ./frontend
    container_name: mozi-frontend
    restart: always
    expose:
      - 3000
    environment:
      - NEXT_PUBLIC_APP_NAME=${NEXT_PUBLIC_APP_NAME}
      - BACKEND_URL=http://backend:8000/api
      - API_KEY=${API_KEY}
      - AUTH_PASSCODE=${AUTH_PASSCODE}
    depends_on:
      - backend
    networks:
      - dokploy-network

networks:
  dokploy-network:
    external: true

volumes:
  data:
